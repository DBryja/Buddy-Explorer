<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1" />
    <title>Document</title>
    <!-- function to find form post errors  -->
    <% function getError(prop){ try{ const searchIndex = errors.findIndex((item) => item.param == prop);
    return(errors[searchIndex].msg); } catch(err){ return ""; } } %>
  </head>
  <body>
    <%- include("../components/header"); %><!-- -->
    <%- include("../components/loadingScreen"); %><!-- -->

    <div class="measure-wd index--underAll"></div>
    <div class="wrapper wrapper--signin">
      <div class="window window--signin">
        <span class="window--title"> Zaloguj się </span>
        <form method="POST" class="signin--form">
          <p class="error"><%= getError("invalid")%></p>

          <div class="title-input">
            <span class="title-input--title">email</span>
            <input
              type="text"
              placeholder="email@email.com"
              class="email input input--lb-title"
              name="email"
              title="email"
              required
            />
          </div>

          <div class="title-input">
            <span class="title-input--title">hasło</span>
            <div class="password_container">
              <input
                type="password"
                placeholder="********"
                class="password input input--lb-title"
                name="password"
                title="hasło"
                blockID="1"
                required
              />
              <div class="passwordVis input-icon" blockid="1"></div>
            </div>
          </div>
          <button class="btn btn--green btn--signin">zaloguj</button>
          <p class="ask_account">
            <span>Nie masz konta?</span>
            <a href="/guide/signup">Zarejestruj się</a>
          </p>
        </form>
      </div>
    </div>

    <!-- SCRIPTS -->
    <% if (typeof libs !== 'undefined') { %> <% for (let lib of libs) { %>
    <script src="/libs/<%= lib %>.js" type="text/javascript"></script>
    <% } } %>
    <script>
      document.querySelectorAll(".passwordVis").forEach((el) => {
        el.addEventListener("click", (e) => showPassword(e));
      });
    </script>
  </body>
</html>
